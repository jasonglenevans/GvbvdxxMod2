{"version":3,"file":"js/addon-entry-paint-by-default.js","sources":["webpack://GUI/./src/addons/addons/paint-by-default/_runtime_entry.js","webpack://GUI/./src/addons/addons/paint-by-default/userscript.js"],"sourcesContent":["/* generated by pull.js */\nimport _js from \"./userscript.js\";\nexport const resources = {\n  \"userscript.js\": _js,\n};\n","export default async function ({ addon, console }) {\r\n  const spriteMeta = Object.assign(Object.create(null), {\r\n    upload: {\r\n      index: 0,\r\n      tooltip: \"gui.spriteSelector.addSpriteFromFile\",\r\n    },\r\n    surprise: {\r\n      index: 1,\r\n      tooltip: \"gui.spriteSelector.addSpriteFromSurprise\",\r\n    },\r\n    paint: {\r\n      index: 2,\r\n      tooltip: \"gui.spriteSelector.addSpriteFromPaint\",\r\n    },\r\n    library: {\r\n      index: 3,\r\n      tooltip: \"gui.spriteSelector.addSpriteFromLibrary\",\r\n    },\r\n  });\r\n  const backdropMeta = Object.assign(Object.create(null), {\r\n    upload: {\r\n      index: 0,\r\n      tooltip: \"gui.stageSelector.addBackdropFromFile\",\r\n    },\r\n    surprise: {\r\n      index: 1,\r\n      tooltip: \"gui.stageSelector.addBackdropFromSurprise\",\r\n    },\r\n    paint: {\r\n      index: 2,\r\n      tooltip: \"gui.stageSelector.addBackdropFromPaint\",\r\n    },\r\n    library: {\r\n      index: 3,\r\n      tooltip: \"gui.spriteSelector.addBackdropFromLibrary\",\r\n    },\r\n  });\r\n  const costumeMeta = Object.assign(Object.create(null), {\r\n    upload: {\r\n      index: 0,\r\n      tooltip: \"gui.costumeTab.addFileCostume\",\r\n    },\r\n    surprise: {\r\n      index: 1,\r\n      tooltip: \"gui.costumeTab.addSurpriseCostume\",\r\n    },\r\n    paint: {\r\n      index: 2,\r\n      tooltip: \"gui.costumeTab.addBlankCostume\",\r\n    },\r\n    library: {\r\n      index: 3,\r\n      tooltip: \"gui.costumeTab.addCostumeFromLibrary\",\r\n    },\r\n  });\r\n  const soundMeta = Object.assign(Object.create(null), {\r\n    upload: {\r\n      index: 0,\r\n      tooltip: \"gui.soundTab.fileUploadSound\",\r\n    },\r\n    surprise: {\r\n      index: 1,\r\n      tooltip: \"gui.soundTab.surpriseSound\",\r\n    },\r\n    record: {\r\n      index: 2,\r\n      tooltip: \"gui.soundTab.recordSound\",\r\n    },\r\n    library: {\r\n      index: 3,\r\n      tooltip: \"gui.soundTab.addSoundFromLibrary\",\r\n    },\r\n  });\r\n  const getSetting = (id) => {\r\n    if (addon.self.disabled) {\r\n      return \"library\";\r\n    }\r\n    return addon.settings.get(id);\r\n  };\r\n  const getButtonToClick = (mainButton) => {\r\n    const assetPanelWrapper = mainButton.closest(\"[class*=asset-panel_wrapper_]\");\r\n    if (assetPanelWrapper) {\r\n      if (addon.tab.redux.state.scratchGui.editorTab.activeTabIndex === 2) {\r\n        return soundMeta[getSetting(\"sound\")] || soundMeta.library;\r\n      } else {\r\n        return costumeMeta[getSetting(\"costume\")] || costumeMeta.library;\r\n      }\r\n    } else if (mainButton.closest('[class*=\"target-pane_stage-selector-wrapper\"]')) {\r\n      return backdropMeta[getSetting(\"backdrop\")] || backdropMeta.library;\r\n    } else {\r\n      return spriteMeta[getSetting(\"sprite\")] || spriteMeta.library;\r\n    }\r\n  };\r\n  document.body.addEventListener(\r\n    \"click\",\r\n    (e) => {\r\n      if (addon.self.disabled) {\r\n        return;\r\n      }\r\n      const mainButton = e.target.closest('[class*=\"action-menu_main-button_\"]');\r\n      if (!mainButton) {\r\n        return;\r\n      }\r\n      e.stopPropagation();\r\n      const moreButtonsElement = mainButton.parentElement.querySelector('[class*=\"action-menu_more-buttons_\"]');\r\n      const moreButtons = moreButtonsElement.children;\r\n      const { index } = getButtonToClick(mainButton);\r\n      // better-img-uploads can add a button at the start, so search \"from the end\" for compatibility\r\n      const buttonToClick = moreButtons[moreButtons.length - (4 - index)];\r\n      const elementToClick = buttonToClick.querySelector(\"button\");\r\n      elementToClick.click();\r\n    },\r\n    {\r\n      bubble: true,\r\n    }\r\n  );\r\n  document.body.addEventListener(\r\n    \"mouseover\",\r\n    (e) => {\r\n      const mainButton = e.target.closest('[class*=\"action-menu_main-button_\"]');\r\n      if (!mainButton) {\r\n        return;\r\n      }\r\n      const tooltipElement = mainButton.parentElement.querySelector(\".__react_component_tooltip\");\r\n      const { tooltip } = getButtonToClick(mainButton);\r\n      const translatedTooltip = addon.tab.redux.state.locales.messages[tooltip];\r\n      const needToFixTooltipText = translatedTooltip && tooltipElement.textContent !== translatedTooltip;\r\n      if (needToFixTooltipText) {\r\n        tooltipElement.textContent = translatedTooltip;\r\n        setTimeout(() => {\r\n          tooltipElement.textContent = translatedTooltip;\r\n          mainButton.dispatchEvent(new Event(\"mouseenter\"));\r\n        });\r\n      }\r\n    },\r\n    {\r\n      bubble: true,\r\n    }\r\n  );\r\n}\r\n"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AADA;;;;;;;;;;;;ACFA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AAFA;AAIA;AACA;AACA;AAFA;AAIA;AACA;AACA;AAFA;AAbA;AAkBA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AAFA;AAIA;AACA;AACA;AAFA;AAIA;AACA;AACA;AAFA;AAbA;AAkBA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AAFA;AAIA;AACA;AACA;AAFA;AAIA;AACA;AACA;AAFA;AAbA;AAkBA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AAFA;AAIA;AACA;AACA;AAFA;AAIA;AACA;AACA;AAFA;AAbA;AACA;AAiBA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAGA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAEA;AADA;AAIA;AAGA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AADA;AAIA;;;;A","sourceRoot":""}