{"version":3,"file":"js/addon-entry-search-sprites.js","sources":["webpack://GUI/./src/addons/addons/search-sprites/search-bar.css","webpack://GUI/./src/addons/addons/search-sprites/_runtime_entry.js","webpack://GUI/./src/addons/addons/search-sprites/userscript.js"],"sourcesContent":["exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".sa-search-sprites-container {\\r\\n  position: relative;\\r\\n  display: flex;\\r\\n  align-items: center;\\r\\n}\\r\\n\\r\\ninput.sa-search-sprites-box {\\r\\n  width: 100%;\\r\\n  box-sizing: border-box;\\r\\n  background-color: transparent;\\r\\n  border: 0px;\\r\\n  border-bottom: 1px solid hsla(0, 0%, 1%, 0.15);\\r\\n  outline: none;\\r\\n  padding: 5px 20px 5px 10px;\\r\\n}\\r\\n\\r\\n.sa-search-sprites-reset {\\r\\n  display: none;\\r\\n  margin: 0;\\r\\n  padding: 0;\\r\\n  background: none;\\r\\n  border: none;\\r\\n  outline: none;\\r\\n  cursor: pointer;\\r\\n  position: absolute;\\r\\n  right: 0;\\r\\n  padding-right: 5px;\\r\\n  font-size: 25px;\\r\\n}\\r\\n\\r\\n.sa-search-sprites-box:not(:placeholder-shown) ~ .sa-search-sprites-reset {\\r\\n  display: block;\\r\\n}\\r\\n\", \"\"]);\n\n// exports\n","/* generated by pull.js */\nimport _js from \"./userscript.js\";\nimport _css from \"!css-loader!./search-bar.css\";\nexport const resources = {\n  \"userscript.js\": _js,\n  \"search-bar.css\": _css,\n};\n","export default async function ({ addon, global, console, msg }) {\r\n  let spritesContainer;\r\n  let spriteSelectorContainer;\r\n\r\n  const container = document.createElement(\"div\");\r\n  container.className = \"sa-search-sprites-container\";\r\n  addon.tab.displayNoneWhileDisabled(container, {\r\n    display: \"flex\",\r\n  });\r\n\r\n  const searchBox = document.createElement(\"input\");\r\n  searchBox.className = \"sa-search-sprites-box\";\r\n  searchBox.placeholder = msg(\"placeholder\");\r\n  searchBox.autocomplete = \"off\";\r\n  // search might make more sense, but browsers treat them special in ways that this addon does not handle,\r\n  // so just leave it as a text input. Also note that Scratch uses type=text for its own search inputs in\r\n  // the libraries, so this fits right in.\r\n  searchBox.type = \"text\";\r\n\r\n  const search = (query) => {\r\n    if (!spritesContainer) return;\r\n\r\n    query = query.toLowerCase();\r\n    const containsQuery = (str) => str.toLowerCase().includes(query);\r\n\r\n    for (const sprite of spritesContainer.children) {\r\n      const visible =\r\n        !query ||\r\n        containsQuery(sprite.children[0].children[1].innerText) ||\r\n        (containsQuery(sprite.children[0].children[2].children[0].innerText) &&\r\n          sprite.children[0].classList.contains(\"sa-folders-folder\"));\r\n      sprite.style.display = visible ? \"\" : \"none\";\r\n    }\r\n  };\r\n\r\n  searchBox.addEventListener(\"input\", (e) => {\r\n    search(e.target.value);\r\n  });\r\n\r\n  const reset = () => {\r\n    search(\"\");\r\n    searchBox.value = \"\";\r\n  };\r\n\r\n  const resetButton = document.createElement(\"button\");\r\n  resetButton.className = \"sa-search-sprites-reset\";\r\n  resetButton.addEventListener(\"click\", reset);\r\n  resetButton.textContent = \"Ã—\";\r\n  addon.self.addEventListener(\"disabled\", reset);\r\n\r\n  container.appendChild(searchBox);\r\n  container.appendChild(resetButton);\r\n\r\n  while (true) {\r\n    await addon.tab.waitForElement(\"div[class^='sprite-selector_items-wrapper']\", {\r\n      markAsSeen: true,\r\n      reduxEvents: [\"scratch-gui/mode/SET_PLAYER\", \"fontsLoaded/SET_FONTS_LOADED\", \"scratch-gui/locales/SELECT_LOCALE\"],\r\n      reduxCondition: (state) => !state.scratchGui.mode.isPlayerOnly,\r\n    });\r\n\r\n    spritesContainer = document.querySelector('[class^=\"sprite-selector_items-wrapper\"]');\r\n    spriteSelectorContainer = document.querySelector('[class^=\"sprite-selector_scroll-wrapper\"]');\r\n    spriteSelectorContainer.insertBefore(container, spritesContainer);\r\n    reset(); // Clear search box after going outside then inside\r\n  }\r\n}\r\n"],"mappings":";;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACPA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAFA;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAEA;AACA;AACA;AACA;AADA;AAIA;AACA;AACA;AACA;AAEA;AACA;AACA;AAAA;AACA;AACA;AACA;AAEA;AACA;AAAA;AACA;AACA;AACA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAHA;AAMA;AACA;AACA;AACA;AACA;AACA;;;;A","sourceRoot":""}