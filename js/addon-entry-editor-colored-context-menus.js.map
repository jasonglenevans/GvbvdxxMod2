{"version":3,"file":"js/addon-entry-editor-colored-context-menus.js","sources":["webpack://GUI/./src/addons/addons/editor-colored-context-menus/userscript.css","webpack://GUI/./src/addons/addons/editor-colored-context-menus/_runtime_entry.js","webpack://GUI/./src/addons/addons/editor-colored-context-menus/userscript.js"],"sourcesContent":["exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".sa-contextmenu-colored .blocklyContextMenu {\\r\\n  background-color: var(--sa-contextmenu-bg) !important;\\r\\n  border-color: var(--sa-contextmenu-border) !important;\\r\\n}\\r\\n.sa-contextmenu-colored .blocklyContextMenu .goog-menuitem-highlight,\\r\\n.sa-contextmenu-colored .s3dev-mi:hover {\\r\\n  background-color: var(--sa-contextmenu-hover) !important;\\r\\n  border-color: transparent !important;\\r\\n}\\r\\n.sa-contextmenu-colored .blocklyContextMenu .goog-menuitem[style*=\\\"border-top\\\"] {\\r\\n  border-top-color: var(--sa-contextmenu-border) !important;\\r\\n}\\r\\n.sa-contextmenu-colored .blocklyContextMenu .goog-menuitem .goog-menuitem-content {\\r\\n  color: var(--sa-contextmenu-text);\\r\\n}\\r\\n\", \"\"]);\n\n// exports\n","/* generated by pull.js */\nimport _js from \"./userscript.js\";\nimport _css from \"!css-loader!./userscript.css\";\nexport const resources = {\n  \"userscript.js\": _js,\n  \"userscript.css\": _css,\n};\n","export default async function ({ addon, global, console }) {\r\n  const ScratchBlocks = await addon.tab.traps.getBlockly();\r\n\r\n  const applyContextMenuColor = (block) => {\r\n    const widgetDiv = ScratchBlocks.WidgetDiv.DIV;\r\n    if (!widgetDiv) {\r\n      return;\r\n    }\r\n    const background = block.svgPath_;\r\n    if (!background) {\r\n      return;\r\n    }\r\n    const style = window.getComputedStyle(background);\r\n    const fill = style.getPropertyValue(\"fill\");\r\n    const border = style.getPropertyValue(\"stroke\") || \"#0003\";\r\n    const textColor = style.getPropertyValue(\"--sa-block-text-color\") || \"#fff\";\r\n    const hoverBg = style.getPropertyValue(\"--sa-block-secondary-color\") || \"#0001\";\r\n    widgetDiv.classList.add(\"sa-contextmenu-colored\");\r\n    widgetDiv.style.setProperty(\"--sa-contextmenu-bg\", fill);\r\n    widgetDiv.style.setProperty(\"--sa-contextmenu-border\", border);\r\n    widgetDiv.style.setProperty(\"--sa-contextmenu-text\", textColor);\r\n    widgetDiv.style.setProperty(\"--sa-contextmenu-hover\", hoverBg);\r\n  };\r\n\r\n  const originalHandleRightClick = ScratchBlocks.Gesture.prototype.handleRightClick;\r\n  ScratchBlocks.Gesture.prototype.handleRightClick = function (...args) {\r\n    const block = this.targetBlock_;\r\n    const ret = originalHandleRightClick.call(this, ...args);\r\n    if (block) {\r\n      applyContextMenuColor(block);\r\n    }\r\n    return ret;\r\n  };\r\n\r\n  const originalHide = ScratchBlocks.WidgetDiv.hide;\r\n  ScratchBlocks.WidgetDiv.hide = function (...args) {\r\n    if (ScratchBlocks.WidgetDiv.DIV) {\r\n      ScratchBlocks.WidgetDiv.DIV.classList.remove(\"sa-contextmenu-colored\");\r\n    }\r\n    return originalHide.call(this, ...args);\r\n  };\r\n}\r\n"],"mappings":";;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACPA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAFA;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAFA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAJA;AAAA;AAAA;AACA;AAGA;AACA;AACA;;;;A","sourceRoot":""}