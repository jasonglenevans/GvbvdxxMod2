{"version":3,"file":"js/addon-entry-script-snap.js","sources":["webpack://GUI/./src/addons/addons/script-snap/_runtime_entry.js","webpack://GUI/./src/addons/addons/script-snap/userscript.js"],"sourcesContent":["/* generated by pull.js */\nimport _js from \"./userscript.js\";\nexport const resources = {\n  \"userscript.js\": _js,\n};\n","export default async function ({ addon, global, console }) {\r\n  const Blockly = await addon.tab.traps.getBlockly();\r\n  let workspace = Blockly.getMainWorkspace();\r\n  // Handle future workspaces\r\n  const originalInit = Blockly.init_;\r\n  Blockly.init_ = function (...args) {\r\n    workspace = args[0];\r\n    if (!addon.self.disabled) setGrid(true);\r\n    return originalInit.call(this, ...args);\r\n  };\r\n\r\n  setGrid(true);\r\n\r\n  addon.settings.addEventListener(\"change\", () => setGrid(true));\r\n  addon.self.addEventListener(\"disabled\", () => setGrid(false));\r\n  addon.self.addEventListener(\"reenabled\", () => setGrid(true));\r\n\r\n  function setGrid(enabled) {\r\n    workspace.grid_.snapToGrid_ = enabled;\r\n    if (enabled) workspace.grid_.spacing_ = addon.settings.get(\"grid\");\r\n    else workspace.grid_.spacing_ = 40;\r\n    workspace.grid_.update(workspace.scale);\r\n  }\r\n}\r\n"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AADA;;;;;;;;;;;;ACFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;;;;A","sourceRoot":""}